<!DOCTYPE html>
<html>
<head>
    <title>Search Sleeper Username</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>

<body>
    <h1>Search Sleeper Username</h1>
    <div id="loading-message" class="text-center fw-bold fs-5" style="display: none;"></div>
    <form id="usernameForm" action="/search_username" method="POST">
    <label for="username">Sleeper Username:</label>
    <input type="text" id="username" name="username" required>

    <fieldset>
    <legend>Best Ball League Options:</legend>

    <input type="checkbox" id="only_bestball" name="only_bestball" value="1" onchange="toggleExclusive(this)">
    <label for="only_bestball">Only Best Ball</label><br>

    <input type="checkbox" id="exclude_bestball" name="exclude_bestball" value="1" onchange="toggleExclusive(this)">
    <label for="exclude_bestball">Exclude Best Ball</label><br>
</fieldset>

<p id="checkbox-error" style="color: red; display: none;">You can only select one best ball filter option.</p>




    <button type="submit">Search</button>
    <div id="loadingMessage" style="display: none; font-weight: bold; margin-top: 10px;"></div>

    </form>

<script>
  const loadingText = [
    "Loading", "Loading.", "Loading..", "Loading...", "Loading....",
    "Still Loading...", "Wow youâ€™ve got a lot of leagues...",
    "Almost there...", "Crunching numbers...", "Finishing up..."
  ];
  let loadingIndex = 0;
  let loadingInterval = null;

  function showLoadingMessages() {
    const loadingDiv = document.getElementById("loading-message");
    loadingDiv.style.display = "block";
    loadingDiv.innerText = loadingText[0];
    loadingIndex = 0;

    loadingInterval = setInterval(() => {
      loadingIndex++;
      if (loadingIndex < loadingText.length) {
        loadingDiv.innerText = loadingText[loadingIndex];
      } else {
        clearInterval(loadingInterval);
      }
    }, 700);
  }

  function hideLoadingMessages() {
    const loadingDiv = document.getElementById("loading-message");
    loadingDiv.style.display = "none";
    clearInterval(loadingInterval);
  }

  document.addEventListener("DOMContentLoaded", () => {
    const form = document.getElementById("usernameSearchForm");
    if (form) {
      form.addEventListener("submit", () => {
        showLoadingMessages();
      });
    }
  });



  function toggleExclusive(clickedBox) {
    const only = document.getElementById('only_bestball');
    const exclude = document.getElementById('exclude_bestball');
    const error = document.getElementById('checkbox-error');

    if (only.checked && exclude.checked) {
        clickedBox.checked = false;
        error.style.display = 'block';
    } else {
        error.style.display = 'none';
    }
}
</script>


</body>




</html>
